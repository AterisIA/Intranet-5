[Nota: Intranet - Projetos e Orçamentos - Projetos]

[Nota: Onde]
Na aba /projetos haverá uma tabela interativa com as colunas: nome, cliente, empresa, prazo, valor máximo, data de criação e ações — todas (exceto Ações) ordenáveis.
No header da página, à direita do título Projetos, exibir o botão primário “+ Novo Projeto” que abre o pop-up de criação/edição (mesmo componente do ver/editar).

Acima da tabela, um bloco de filtros usando os componentes padrão: TableFilters contendo:

TableSearchInput (busca geral por nome/descrição, aplica em tempo real);

quatro filtros seletivos:

Cliente (TableFilterSelect source="cliente"),

Empresa (TableFilterSelect source="empresa"),

Fornecedor (TableFilterSelect source="fornecedor"),

Local (TableFilterSelect source="local");

Botão secundário “Limpar” para limpar todos os filtros (ligado ao estado de useTableFilters).

Os filtros são controlados por useTableFilters e useFilterOptions.

[Nota: Ordenação]
Usar o estado sort de useTableFilters. Cada título de coluna (exceto Ações) exibe ícone de ordenação; ao clicar alterna asc/desc e atualiza o estado.

[Nota: Filtros]

TableFilters + TableSearchInput com aplicação instantânea (sem botão Aplicar).

Chips de filtros ativos vindos de useTableFilters (ex.: “Cliente: Cury ×”, “Local: Centro ×”). Cada chip é removível individualmente.

Ação “Limpar tudo” (ou botão “Limpar”) que reseta o estado de useTableFilters.

Filtros adicionais opcionais: Data de Criação e Prazo (date range pickers) registrados em useTableFilters, refletidos nos chips e aplicados/remoções em tempo real.

A listagem reage imediatamente a qualquer alteração de filtro, busca ou ordenação.

[Nota: Tabela]
Título da seção: “Projetos Cadastrados”.
Colunas e formatações:

Nome (texto; pode exibir badge/lozenge discreto para cliente destacado quando em foco/hover como no anexo)

Cliente (texto; quando disponível, renderizar pill suave bg-muted com padding)

Empresa (texto ou “–”)

Prazo (data dd/MM/yyyy ou “–”)

Valor Máximo (moeda R$ 0.000,00; “–” se ausente)

Data de Criação (data dd/MM/yyyy)

Ações (ícones visualizar, editar, excluir; título da coluna centralizado e alinhado aos ícones)
Paginação padrão (client/server), estados loading/empty/error consistentes com o design system.

Acima de cada um dos filtros deve haver um indicador de qual coluna ele esta se referindo

[Nota: Ações / Pop-up reutilizável]
Os botões visualizar, editar e excluir ficam visíveis por linha.
Ao clicar em visualizar ou editar, abrir um pop-up reutilizável com três abas: Dados, Sistema e Mensagem (mesmo componente para criar/editar/visualizar; modo visualização com campos read-only).

[Nota: Aba Dados]
Campos do formulário:

Nome do Projeto (obrigatório)

Cliente (obrigatório; select)

Empresa (opcional; select)

Fornecedor (opcional; select)

Local (opcional; select)

Prazo (opcional; date picker)

Valor Máximo (opcional; input monetário com máscara BR)

Descrição (opcional; textarea)

Tags (opcional; multi-select)

Anexos (opcional; uploader múltiplo)
O campo responsável é preenchido automaticamente com o usuário logado e não é exibido.
Validação: o botão Salvar só habilita quando os obrigatórios estiverem válidos (Nome, Cliente).
Após salvar, fechar o pop-up, inserir/atualizar o item na tabela (respeitando a ordenação atual) e exibir toaster de sucesso.

[Nota: Aba Sistema (Timeline Técnica)]
Mesma timeline técnica do módulo anterior: ScrollArea h-[400px], eventos mais recentes primeiro, com ícones do lucide-react e linha vertical que para no último item.
Tipos e ícones: "created"→CirclePlus, "edited"→PencilLine, "marked"→Tag, "deleted"→Trash2, "restored"→RotateCcw (todos text-primary em bg-primary/10).
Interface TimelineEvent:
{ id: string; type: 'created'|'edited'|'marked'|'deleted'|'restored'; user: string; timestamp: Date; description: string }
Metadados com UserRound e CalendarClock, data em pt-BR "dd/MM/yyyy 'às' HH:mm" (date-fns/ptBR).

[Nota: Aba Mensagens]
Na aba Mensagem, crie um aba que funciona como um sistema de chat colaborativo moderno usando React, TypeScript, Tailwind CSS e componentes Shadcn/UI com as seguintes especificações:

**ESTRUTURA DE COMPONENTES:**

1. **Componente Principal (ChatColaborativo.tsx)**
   - Gerencia estado de mensagens e participantes
   - Props: recordTitle (título do registro), recordId (ID do registro)
   - Estado inicial com 4 participantes mockados com avatares do DiceBear
   - Mensagens iniciais demonstrando funcionalidades de menção
   - Layout: Container flex vertical sem scroll, distribuindo espaço entre título fixo, área de mensagens com scroll, e input fixo

2. **Lista de Mensagens (MessageList.tsx)**
   - ScrollArea com padding adequado aplicado na lista de mensagens (o popup em si deve ser fixo)
   - Mensagens alinhadas à esquerda (outros) e direita (usuário atual)
   - Cada mensagem contém:
     * Avatar circular (40x40px)
     * Nome do autor em negrito
     * Timestamp formatado em português (Hoje às HH:mm, Ontem às HH:mm, ou DD/MM/YYYY às HH:mm)
     * Bolha de mensagem com bordas arredondadas
     * Conteúdo com suporte a menções destacadas
   - Mensagens do usuário: fundo azul vibrante, texto branco
   - Mensagens de outros: fundo cinza claro (muted), texto escuro
   - Menções (@nome) destacadas com fundo semi-transparente da cor primary

3. **Input de Mensagens (MessageInput.tsx)**
   - Textarea expansível com altura mínima de 80px
   - Placeholder: "Digite sua mensagem... Use @ para mencionar alguém"
   - Botão de envio azul com ícone Send do Lucide
   - Sistema de menções com @:
     * Detecta @ digitado e abre popover de sugestões acima do input
     * Filtra participantes conforme texto digitado após @
     * Popover mostra avatar, nome e cargo
     * Ao clicar, insere menção completa no texto
     * Fecha automaticamente após seleção
   - Hint: "Pressione Enter para enviar, Shift+Enter para nova linha"
   - Validação de menções ao enviar (apenas usuários válidos)

**DESIGN SYSTEM (CSS Variables):**

```css
--primary: 217 83% 58%; /* Azul vibrante para mensagens enviadas */
--primary-foreground: 0 0% 100%;
--muted: 240 4.8% 95.9%;  /* Cinza claro para mensagens recebidas */
--muted-foreground: 240 3.8% 46.1%;
--border: 240 5.9% 90%;
--radius: 0.75rem;[Nota: Design System]
Variáveis mantidas:

--primary: 217 83% 58%;
--primary-foreground: 0 0% 100%;
--muted: 240 4.8% 95.9%;
--muted-foreground: 240 3.8% 46.1%;
--border: 240 5.9% 90%;
--radius: 0.75rem;


[Nota: Estados & Acessibilidade]

Skeletons para carregamento; estado vazio com mensagem e ação “Novo Projeto”.

Labels/aria em todos os controles; ícones de ação com aria-label (“Visualizar projeto”, “Editar projeto”, “Excluir projeto”).

Confirmação antes de excluir.

[Nota: Final]
A tela deve replicar a hierarquia e distribuição do anexo: título e descrição à esquerda, card de filtros (linha com busca + selects + botão Limpar), seção “Projetos Cadastrados” com tabela, coluna Ações centralizada, e “+ Novo Projeto” destacado no topo à direita.
