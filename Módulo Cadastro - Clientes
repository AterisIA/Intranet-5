[Nota: Intranet - Módulo Cadastro - Clientes]

[Nota: Onde]
Dentro do item de menu chamado “Cadastro”, crie um subitem chamado “Clientes”. Ao clicar em “Clientes”, abrir uma página chamada “Clientes”, seguindo o padrão visual dos demais módulos utilizando shadcn/ui.

[Nota: O que]
Apresentar a tabela de listagem dos clientes com as colunas “Código”, “CNPJ”, “Razão Social”, “Apelido”, “Tipo de Cliente” e “Ações”, todas ordenáveis; o título da coluna “Ações” deve ficar centralizado e alinhado visualmente entre os ícones e, na própria coluna, exibir diretamente os ícones de Visualizar, Editar e Excluir (sem menu de três pontos).
A listagem deve reagir a changes em filters, search e sort providos por useTableFilters e atualizar automaticamente após criar, editar ou excluir; utilizar consistentemente componentes shadcn/ui, integrar os date range pickers de criação/atualização ao useTableFilters, exibir toasts e loaders para criar, editar, excluir e enviar mensagem e garantir acessibilidade com foco de teclado e aria-labels nos controles e ícones de ação. A página deve exibir um botão “Novo Cliente”.

[Nota: Ordenação]
A ordenação deve usar o estado sort de useTableFilters, com ícone de ordenação ao lado do título da coluna, alternando entre crescente e decrescente ao clicar e atualiza o estado.

[Nota: Filtros]
Acima da tabela, incluir um container TableFilters controlado pelos hooks useTableFilters e useFilterOptions; dentro dele, um TableSearchInput que faz busca geral em Razão Social/Apelido/CNPJ e filtra automaticamente enquanto o usuário digita, sem botão de aplicar; logo abaixo, renderizar os chips dos filtros ativos expostos por useTableFilters (por exemplo, “CNPJ válido ×”, “Empresa: Matriz ×”, intervalos de datas), cada chip removível individualmente; oferecer ação “Limpar tudo” integrada ao estado de useTableFilters; quaisquer filtros adicionais — como Data de Criação e Data de Atualização — devem ser registrados em useTableFilters e expostos no TableFilters por meio de date range pickers, refletindo nos chips, e toda aplicação ou remoção de filtro deve atualizar instantaneamente a listagem.

[Nota: Abas das opções criar, editar e visualizar]
Ao criar, editar ou visualizar será aberto um pop-up reutilizável com as seções citadas abaixo. Importante: para melhor organização, a aba “Dados” será dividida em múltiplas abas temáticas (cada grupo em sua própria aba), mantendo também as abas “Sistema” e “Mensagens”.

[Nota: Aba Dados Básicos]

Código Cliente (texto) — obrigatório

CNPJ (texto, máscara/validação) — obrigatório

Razão Social (texto) — obrigatório

Apelido (texto) — obrigatório

Tipo de Cliente (select) — obrigatório
Regras gerais desta aba: validação via react-hook-form + Zod; foco de teclado; aria-label nos controles; exibir mensagens de erro claras; ao salvar, toast de sucesso/erro e atualização da listagem.

[Nota: Aba Locais Vinculados]

Tabela embutida somente para visualização/seleção de locais com colunas: Nome, Tipo de Local, Descrição, Empresa, Endereço (CEP, Número, Rua, Bairro, Cidade, UF), Frete (Moto, Carro, Utilitário).

Ênfase: não exibir coluna “Ações” nesta tabela e não renderizar botões de “Novo Local” (nem criar/editar/excluir).

O usuário pode apenas visualizar os locais existentes e selecionar um ou mais locais (se aplicável) para salvar no contexto do cliente.

Validação de coerência dos valores de Frete (≥ 0) quando carregados/selecionados.

[Nota: Aba Informações Fiscais]

Inscrição Estadual (IE) — texto

Inscrição Municipal (IM) — texto

E-mail NFE — e-mail

IBGE Município — seletor/autocomplete (texto ou código)
Validações: formatos de IE/IM conforme UF (quando aplicável), e-mail NFE válido; IBGE com busca/autocomplete.

[Nota: Aba Contatos]

Tabela embutida somente para visualização/seleção de contatos com colunas: Nome, E-mail, Telefone, Cargo, Cliente (opcional), Local (opcional), Empresa (opcional), Observações.

Ênfase: não exibir coluna “Ações” nesta tabela e não renderizar botões de “Novo Contato” (nem criar/editar/excluir).

O usuário pode apenas visualizar os contatos existentes e selecionar um ou mais contatos (se aplicável) para salvar no contexto do cliente.

Campos “Cliente/Local/Empresa” apenas para filtro/visualização dos contatos existentes.

[Nota: Aba Financeiro]

Limite de Crédito — moeda

Matrícula CEI/CNO — texto

Dados Bancários de Recebimento (grupo):

Banco — select/autocomplete

Agência — texto

Conta — texto

PIX — texto (aceitar chave aleatória/CPF/CNPJ/e-mail)

CNPJ Bancário — texto (validação CNPJ)
Regra: mascarar e validar campos; impedir salvar com dados bancários inconsistentes; feedbacks de erro próximos aos campos.

[Nota: Ações do Formulário]

Botões: “Salvar”, “Salvar e continuar” e “Cancelar”.

“Cancelar” realiza dirty check com diálogo de confirmação antes de descartar alterações.

Ao salvar, exibir toast de sucesso/erro e atualizar automaticamente a listagem e as tabelas embutidas.

[Nota: Aba Sistema]
Na aba "Sistema" que exibe uma timeline técnica dinâmica com histórico do registro em ordem cronológica (mais recentes primeiro) dentro de um ScrollArea de 400px de altura. Cada evento deve ter: coluna esquerda com ícone circular de 40x40px (w-10 h-10) sobre fundo azul semi-transparente (bg-primary/10) e ícone azul (text-primary) de 20px (w-5 h-5) do lucide-react, conectados por linha vertical cinza (bg-border) de 1px que para no último item; coluna direita com título do evento em negrito (font-semibold text-sm), linha de metadados com micro-ícone UserRound (w-3.5 h-3.5) + nome do usuário e micro-ícone CalendarClock + timestamp formatado em português "dd/MM/yyyy 'às' HH:mm" usando date-fns e locale ptBR, tudo em text-xs text-muted-foreground, separados por border-b exceto o último item. Mapeie os tipos de evento para ícones: "created" usa CirclePlus, "edited" usa PencilLine, "marked" usa Tag, "deleted" usa Trash2, "restored" usa RotateCcw, todos com a mesma cor azul (text-primary e bg-primary/10). A interface TimelineEvent deve ter id (string), type (union dos 5 tipos), user (string), timestamp (Date) e description (string). O componente Timeline recebe array de events, ordena por timestamp decrescente e renderiza cada TimelineItem passando a prop isLast para o último elemento controlar a linha vertical.

[Nota: Aba Mensagens]
Na aba “Mensagens”, crie um sistema de chat colaborativo moderno usando React, TypeScript, Tailwind CSS e componentes Shadcn/UI com as seguintes especificações:

ESTRUTURA DE COMPONENTES:

Componente Principal (ChatColaborativo.tsx)
Gerencia estado de mensagens e participantes
Props: recordTitle (título do registro), recordId (ID do registro)
Estado inicial com 4 participantes mockados com avatares do DiceBear
Mensagens iniciais demonstrando funcionalidades de menção
Layout: Container flex vertical sem scroll, distribuindo espaço entre título fixo, área de mensagens com scroll, e input fixo

Lista de Mensagens (MessageList.tsx)
ScrollArea com padding adequado
Mensagens alinhadas à esquerda (outros) e direita (usuário atual)
Cada mensagem contém:
Avatar circular (40x40px)
Nome do autor em negrito
Timestamp formatado em português (Hoje às HH:mm, Ontem às HH:mm, ou DD/MM/YYYY às HH:mm)
Bolha de mensagem com bordas arredondadas
Conteúdo com suporte a menções destacadas
Mensagens do usuário: fundo azul vibrante, texto branco
Mensagens de outros: fundo cinza claro (muted), texto escuro
Menções (@nome) destacadas com fundo semi-transparente da cor primary

Input de Mensagens (MessageInput.tsx)
Textarea expansível com altura mínima de 80px
Placeholder: "Digite sua mensagem... Use @ para mencionar alguém"
Botão de envio azul com ícone Send do Lucide
Sistema de menções com @:
Detecta @ digitado e abre popover de sugestões acima do input
Filtra participantes conforme texto digitado após @
Popover mostra avatar, nome e cargo
Ao clicar, insere menção completa no texto
Fecha automaticamente após seleção
Hint: "Pressione Enter para enviar, Shift+Enter para nova linha"
Validação de menções ao enviar (apenas usuários válidos)

DESIGN SYSTEM (CSS Variables):

--primary: 217 83% 58%; /* Azul vibrante para mensagens enviadas */
--primary-foreground: 0 0% 100%;
--muted: 240 4.8% 95.9%;  /* Cinza claro para mensagens recebidas */
--muted-foreground: 240 3.8% 46.1%;
--border: 240 5.9% 90%;
--radius: 0.75rem;


[Nota: Final]
